# Reorganize tasks into folders

from glob import glob
import json
from tqdm import tqdm
import requests
import json
from todoist_api_python.api import TodoistAPI
from tqdm import tqdm
import os

local_paths = {"2271757850": "2271757850/",
"2295625058": "2295625058/",
"2295625058": "2295625058/",
"2296328961": "2296328961/",
"2296328961": "2296328961/",
"2296896649": "2296896649/",
"2307370744": "2307370744/",
"2295986943": "2295625058/2295986943/",
"2296896649": "2295625058/2296896649/",
"2301691830": "2295625058/2301691830/",
"2295625072": "2296328961/2295625072/",
"2295625078": "2296328961/2295625078/",
"2295647029": "2296328961/2295647029/",
"2295788066": "2296328961/2295788066/",
"2295788080": "2296328961/2295788080/",
"2300966648": "2296328961/2300966648/",
"2301918367": "2296328961/2301918367/",
"2296950589": "2296896649/2296950589/",
"2296950589": "2296896649/2296950589/",
"2296951481": "2296896649/2296951481/",
"2296951414": "2296896649/2296950589/2296951414/",
"2296951415": "2296896649/2296950589/2296951415/",
"2296951416": "2296896649/2296950589/2296951416/",
"2296951418": "2296896649/2296950589/2296951418/",
"2296951422": "2296896649/2296950589/2296951422/",
"2296951423": "2296896649/2296950589/2296951423/",
"2296951426": "2296896649/2296950589/2296951426/",
"2296951430": "2296896649/2296950589/2296951430/",
"2296951433": "2296896649/2296950589/2296951433/",
"2296951434": "2296896649/2296950589/2296951434/",
"2296951437": "2296896649/2296950589/2296951437/",
"2296951439": "2296896649/2296950589/2296951439/",
"2296951446": "2296896649/2296950589/2296951446/",
"2296951447": "2296896649/2296950589/2296951447/",
"2296951450": "2296896649/2296950589/2296951450/",
"2296951453": "2296896649/2296950589/2296951453/",
"2296951457": "2296896649/2296950589/2296951457/",
"2296951458": "2296896649/2296950589/2296951458/",
"2296951461": "2296896649/2296950589/2296951461/",
"2296951468": "2296896649/2296950589/2296951468/",
"2296951469": "2296896649/2296950589/2296951469/",
"2296951470": "2296896649/2296950589/2296951470/",
"2296951473": "2296896649/2296950589/2296951473/",
"2296951478": "2296896649/2296950589/2296951478/",
"2296951479": "2296896649/2296950589/2296951479/",
"2296951480": "2296896649/2296950589/2296951480/"}

files = glob("projects/*.json") + glob("projects/**/*.json") + glob("projects/**/**/*.json")

print(files)
os.makedirs("projects2", exist_ok=True)

tasks_json = []

for filename in tqdm(files): 
    task = None
    with open(filename, "r") as file:
        project = json.load(file)
        project['path'] = local_paths[project['id']]
        project['id'] = project['path']

    with open(filename, "w") as file:
        json.dump(project, file)

